(this["webpackJsonpsharestation-client"]=this["webpackJsonpsharestation-client"]||[]).push([[5],{161:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var o=n(19),c=n(159),i=n(0),a=n(110),s=n(140),r=n.n(s),u=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).SOCKET_HOST||"http://13.59.130.193:3004";var l=function(){var e=Object(i.useState)(),t=Object(c.a)(e,2),n=t[0],o=t[1],s=Object(i.useState)(""),l=Object(c.a)(s,2),d=l[0],f=l[1],m=Object(i.useState)([]),h=Object(c.a)(m,2),O=(h[0],h[1]),j=Object(i.useState)({username:"clientNode1"}),b=Object(c.a)(j,2),p=b[0],v=b[1],D=Object(i.useState)([]),S=Object(c.a)(D,2),E=S[0],F=S[1];Object(i.useEffect)((function(){r.a.post("http://3.129.62.138:3000/api/auth",{email:"teste@mail.com",password:"12345678"}).then((function(e){f(e.data.token)})).catch((function(e){console.error("An error has occurred on fetch auth API"),console.error(e);var t=Array.from({length:35},(function(e,t){return{id:"".concat(t),name:"Folder ".concat(t+1),isFolder:!0}}));F(t)}))}),[]),Object(i.useEffect)((function(){d&&o(Object(a.io)(u,{reconnection:!0,auth:{token:d,username:"reactApp",type:"client"}}))}),[d]),Object(i.useEffect)((function(){n&&Object.keys(n).length>0&&(_(),k(),w(),n.emit("server:listHosts",{hosts:["clientNode1","clientNode2"]}))}),[n]),Object(i.useEffect)((function(){n&&p&&T()}),[p]);var T=function(){n.emit("host:listDir",{path:"/Users/caiomorais/Documents/Teste2/",from:n.id,to:p.userID})},_=function(){n.on("client:listDir",(function(e){var t=e.message.map((function(e,t){return{id:"".concat(t),name:e.name,isFolder:e.isDir}}));F(t)}))},k=function(){n.on("client:listHosts",(function(e){e.length>0&&v(e[0]),O(e)}))},w=function(){var e=[];n.on("client:downloadFile",(function(t){if("in_progress"===t.status)e.push(t.chunk);else{var n=new Blob(e,{type:t.type}),o=URL.createObjectURL(n),c=document.createElement("a");c.href=o,c.download=t.filename,c.click()}}))};return{loading:!1,hasDocuments:!0,documents:E,loadFiles:_,loadUsers:k,listDir:T,loadDownloadedFile:w,handleDownload:function(e){n.emit("host:downloadFile",{path:"/Users/caiomorais/Documents/Teste2/",filename:e.name,from:n.id,to:p.userID})}}},d=n(158),f=n(1);var m=function(){var e=l(),t=e.documents,n=e.hasDocuments,c=e.loading,i=e.listDir,a=e.handleDownload;return c?null:n?Object(f.jsx)(o.l,{title:"Meus arquivos",listDir:i,children:t.map((function(e){var t=e.id,n=e.name;return e.isFolder?Object(f.jsx)(o.g,{id:t,name:n},t):Object(f.jsx)("div",{onClick:function(){return a({name:n})},children:Object(f.jsx)(o.f,{name:n},t)})}))}):Object(f.jsx)(o.e.EmptyFeedback,{children:Object(f.jsx)(o.c,{onClick:function(){return Object(d.a)({multiple:!0}).then(console.log)},children:"Enviar arquivo"})})}}}]);
//# sourceMappingURL=5.8675c5f8.chunk.js.map